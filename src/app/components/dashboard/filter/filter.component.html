<div class="container">
  <mat-accordion>
    <mat-expansion-panel
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <mat-expansion-panel-header>
        <mat-panel-title
          ><mat-icon class="filter-icon">filter_alt</mat-icon> Filtre sua busca
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="date-range-pickers-container">
        <mat-form-field appearance="fill">
          <mat-label>Emitido entre</mat-label>
          <mat-date-range-input [formGroup]="range" [rangePicker]="issuePicker">
            <input
              matStartDate
              formControlName="issueStart"
              placeholder="Data inicial"
              readonly
            />
            <input
              matEndDate
              formControlName="issueEnd"
              placeholder="Data final"
              readonly
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="issuePicker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #issuePicker></mat-date-range-picker>

          <mat-error
            *ngIf="range.controls.issueStart.hasError('matStartDateInvalid')"
            >Data inicial inválida</mat-error
          >
          <mat-error
            *ngIf="range.controls.issueEnd.hasError('matEndDateInvalid')"
            >Data final inválida</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Digitalizado entre</mat-label>
          <mat-date-range-input
            [formGroup]="range"
            [rangePicker]="scannedPicker"
          >
            <input
              matStartDate
              formControlName="scannedStart"
              placeholder="Data inicial"
              readonly
            />
            <input
              matEndDate
              formControlName="scannedEnd"
              placeholder="Data final"
              readonly
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="scannedPicker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #scannedPicker></mat-date-range-picker>

          <mat-error
            *ngIf="range.controls.scannedStart.hasError('matStartDateInvalid')"
            >Data inicial inválida</mat-error
          >
          <mat-error
            *ngIf="range.controls.scannedEnd.hasError('matEndDateInvalid')"
            >Data final inválida</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Previsão de pagamento (Dig)</mat-label>
          <mat-date-range-input
            [formGroup]="range"
            [rangePicker]="forecastScPicker"
          >
            <input
              matStartDate
              formControlName="forecastScStart"
              placeholder="Data inicial"
              readonly
            />
            <input
              matEndDate
              formControlName="forecastScEnd"
              placeholder="Data final"
              readonly
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="forecastScPicker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #forecastScPicker></mat-date-range-picker>

          <mat-error
            *ngIf="
              range.controls.forecastScStart.hasError('matStartDateInvalid')
            "
            >Data inicial inválida</mat-error
          >
          <mat-error
            *ngIf="range.controls.forecastScEnd.hasError('matEndDateInvalid')"
            >Data final inválida</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Previsão de pagamento (Apr)</mat-label>
          <mat-date-range-input
            [formGroup]="range"
            [rangePicker]="forecastApprPicker"
          >
            <input
              matStartDate
              formControlName="forecastApprStart"
              placeholder="Data inicial"
              readonly
            />
            <input
              matEndDate
              formControlName="forecastApprEnd"
              placeholder="Data final"
              readonly
            />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="forecastApprPicker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #forecastApprPicker></mat-date-range-picker>

          <mat-error
            *ngIf="
              range.controls.forecastApprStart.hasError('matStartDateInvalid')
            "
            >Data inicial inválida</mat-error
          >
          <mat-error
            *ngIf="range.controls.forecastApprEnd.hasError('matEndDateInvalid')"
            >Data final inválida</mat-error
          >
        </mat-form-field>
      </div>

      <div class="date-range-pickers-container">

        <mat-form-field appearance="fill">
            <mat-label>Aprovado entre</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="approvalPicker">
              <input
                matStartDate
                formControlName="approvalStart"
                placeholder="Data inicial"
                readonly
              />
              <input
                matEndDate
                formControlName="approvalEnd"
                placeholder="Data final"
                readonly
              />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="approvalPicker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #approvalPicker></mat-date-range-picker>
  
            <mat-error
              *ngIf="range.controls.approvalStart.hasError('matStartDateInvalid')"
              >Data inicial inválida</mat-error
            >
            <mat-error
              *ngIf="range.controls.approvalEnd.hasError('matEndDateInvalid')"
              >Data final inválida</mat-error
            >
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Pagamento realizado entre</mat-label>
            <mat-date-range-input [formGroup]="range" [rangePicker]="paymentPicker">
              <input
                matStartDate
                formControlName="paymentStart"
                placeholder="Data inicial"
                readonly
              />
              <input
                matEndDate
                formControlName="paymentEnd"
                placeholder="Data final"
                readonly
              />
            </mat-date-range-input>
            <mat-datepicker-toggle
              matSuffix
              [for]="paymentPicker"
            ></mat-datepicker-toggle>
            <mat-date-range-picker #paymentPicker></mat-date-range-picker>
  
            <mat-error
              *ngIf="range.controls.paymentStart.hasError('matStartDateInvalid')"
              >Data inicial inválida</mat-error
            >
            <mat-error
              *ngIf="range.controls.paymentEnd.hasError('matEndDateInvalid')"
              >Data final inválida</mat-error
            >
          </mat-form-field>


        </div>


      <p>Selected range: {{ range.value | json }}</p>
    </mat-expansion-panel>
  </mat-accordion>
</div>
